---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Oskar Vavtar"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
#runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Analizirali bomo 14 velikih britanskih glasbenih festivalov. To so: 

  * Bestival
  * Boardmasters
  * Cornbury festival
  * Download
  * End Of The Road Festival
  * Glastonbury
  * Isle Of Wight
  * Latitude
  * Lovebox
  * Reading
  * Rewind
  * T In The Park
  * V Festival
  * Wireless
  
Analizirali bomo pogostost glasbenih zvrsti ter karakteristike izvajalcev, kot so spol, starost, izvor... Pogostost zvrsti na festivalih bomo po desetletjih primerjali tudi z glasbenimi lestvicami (oz. zvrsti najbolj prodajanih albumov).

Podatki o festivalih so bili zbrani iz [github repozitorija](https://github.com/BBC-Data-Unit/music-festivals), ki je bil ustvarjen za namene pisanja naslednjega [članka](https://www.bbc.com/news/uk-england-40273193). Zajemajo podatke med leti 1970 in 2017, ter zajemajo nastope glavnih nastopajočih (headlinerjih) na zgoraj naštetih festivalih.

Tabele glasbenih lestvic so bili zbrani iz Wikipedije:

  * [1970-1979](https://en.wikipedia.org/wiki/List_of_best-selling_albums_of_the_1970s_in_the_United_Kingdom)
  * [1980-1989](https://en.wikipedia.org/wiki/List_of_best-selling_albums_of_the_1980s_in_the_United_Kingdom)
  * [1990-1999](https://en.wikipedia.org/wiki/List_of_best-selling_albums_of_the_1990s_in_the_United_Kingdom)
  * [2000-2009](https://en.wikipedia.org/wiki/List_of_best-selling_albums_of_the_2000s_(decade)_in_the_United_Kingdom)
  * [2010-2019](https://en.wikipedia.org/wiki/List_of_best-selling_albums_of_the_2010s_in_the_United_Kingdom)


***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
```

V drugi fazi smo uvozili podatke, ki so bili v obliki CSV.

Podatke o nastopih na festivalih smo uvozili v dve različni tabeli:

Osrednja tema prve so bili žanri izvajalcev:

1. `izvajalci_zvrsti` je razpredelnica s tremi dimenzijami:
  - `Izvajalec` - meritev: ime izvajalca
  - `Leto` - spremenljivka: leto nastopa
  - `Festival` - spremenljivka: festival na katerem je nastopil
  - `Zvrst` - spremenljivka: glavna zvrst izvajalca
  
Druga tema zajema ostale podatke o nastopih:

2. `izvajalci_ostalo` je razpredelnica z osmimi dimenzijami:
  - `Izvajalec` - meritev: ime izvajalca
  - `Leto` - spremenljivka: leto nastopa
  - `Ustanovitev` - spremenljivka: leto od katerega je izvajalec aktiven
  - `Izvor` - spremenljivka: država iz katere izvajalec prihaja
  - `Spol` - spremenljivka: spol izvajalca
  - `Starost` - spremenljivka: starost izvajalca v letu nastopa
  - `Festival` - spremenljivka: festival na katerem je nastopil
  - `Lokacija` - spremenljivka: kraj festivala
  - `Grofija` - spremenljivka: grofija, v kateri je kraj festivala
  
Podatke o najbolj prodajanih albumih desetletij, sem uvozil v 5 različnih tabel, vsako za svoje desetletje:

3. `lestvica70`, `lestvica80`, `lestvica90`, `lestvica00` in `lestvica10` so razpredelnice s tremi dimenzijami:
  - `Naslov` - meritev: naslov albuma
  - `Izvajalec` - spremenljivka: izvajalec albuma
  - `Zvrst` - spremenljivka: zvrst album
  - `Leto` - spremenljivka: leto v katerem je album izšel
  


***

# Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Prvi graf prikazuje pogostost zvrsti na festivalih v vseh letih opazovanja:

```{r graf_zvrsti, echo=FALSE, fig.align='center'}
graf_zvrsti
```

Iz grafa lahko razberemo, da je rock bil od leta 1970 do leta 2017 rock daleč najpogostejša zvrst na festivalih. Veliko manj, vendar vseeno pogoste zvrsti so bile elektronska glasba, indie ter new wave. Pop se po pogostosti znajde šele na petem mestu. Glede na to, da so to podatki britanskih festivalov je morda malo presenetljiv majhen delež punka.



Drugi graf prikazuje primerjavo gibanja pogostosti rocka skozi desetletja na festivalih ter glasbenih lestvicah:

```{r pogostost_rock, echo=FALSE, fig.align='center'}
pogostost_rock
```

Graf nam pokaže, da sta bila deleža v prvih dveh desetletjih. V 90-ih pa je sledil preobrat. Rocka je bilo na lestvicah sicer občutno manj, na festivalih pa ga je blo več kot prej. V prvem desetletju novega tisočletja je nato sledil padec na obeh frontah, desetletje kasneje pa scenarij podoben tistemu iz 90-let. Na tej točki je na festivalih rock prispeval 57.5% glavnih nastopajočih, po drugi strani pa le 13.75% najbolje prodajanih albumov.



Tretji in četrti graf prikazujeta reprezentacijo spolov:

```{r, figures-side, fig.show="hold", out.width="50%"}
spol2
spol1
```

Levi graf prikazuje zgolj deleže, na desnem pa lahko vidimo tudi velikost vzorca, da stvar bolje postavijo v perspektivo. Jasno vidimo, da je vseskozi večinski del nastopajočih moškega spola. Ta delež je še najmanjši v 80-ih letih ter v drugem desetletju novega tisočletja. V zadnjem desetletju lahko vidimo tudi največji delež ženskih izvajalk. Trend, ki ga lahko opazimo je, da delež moških izvajalcev sčasoma sicer pada, z izjemo med leti 2000 in 2009. 



Peti graf prikazuje države izvora izvajalcev:

```{r izvor_graf, echo=FALSE, fig.align='center'}
izvor_graf
```

Vidimo, da je največji delež - skoraj polovica - izvajalcev iz Anglije, kar je bilo tudi pričakovati. Po pogostosti sledita ZDA s skoraj tretjinskim deležem ter Škotska s slabimi 6% nastopajočih. Več kot odstotek nastopajočih lahko pripišemo le še Walesu (2.8%) ter Kanadi (2.3%).

***

